# Требования к работе с git в рамках корпоративного GitLab

Данный документ расширяет [базовые рекомендации по ведению git](git-style.md)  
в части именования веток/MR в рамках работы c задачами

## Ветки:

1. Каждая новая задача создается от ветки master (либо от ветки основной задачи если это связанная подзадача)
2. Название ветки формируется в формате `XXX/description` где "XXX" - номер задачи в портале. В случае если у ветки по какой-то причине нет задачи стиль именования следующий: `prefix/description` Где префикс соответствует типу коммита (hotfix/fix/revert/refactor/etc.)
3. По окончанию задачи создается МР в ветку мастер.

## Коммиты:

1. стиль именования: `XXX: описание коммита` где "XXX" - номер задачи в портале.
2. Описание коммита в повелительном наклонении. Для того чтобы правильно подобрать сообщение, можно воспользоваться следующим шаблоном: 
    > «If applied, this commit will #commit_title#»  
      «В случае применения этот коммит #ваш_заголовок#»

    Примеры:
    ```
    1111: добавит сортировку в списке товаров  
    2222: remove deprecated methods
    ```

## Оформление Merge Request (MR):

1. Стиль именования `XXX: Task name` где 
   - "XXX" - номер задачи в портале 
   - "Task name" - имя задачи без префикса проекта.  
       пример:  
       задача "****.ru: Реализация личного кабинета" с номером 1111  
       корректное название задачи `1111: Реализация личного кабинета`
2. В качестве принимающего (Assignee) должен быть один из maintainer-ов либо owner проекта (пользователь прав которого достаточно влить mr в целевую ветку). 
3. В качестве проверяющего (Reviewer) - постановщик задачи
4. В описании MR должна присутствовать краткая информация по задаче (достаточная для ревью кода) и ссылка на задачу в портале (для оповещения о принятии MR и корректном прохождении скриптов CI/CD).
5. Если в ветке более 1 коммита, то необходимо проставить флаг "Squash commits"
6. При слиянии ветка удаляется из репозитория (флаг в MR "Delete source branch")
7. Если необходимо отправить выполненные работы на код ревью, но задача еще не выполнена, и код не должен попадать в мастер-ветку нужно использовать статус [Draft](https://docs.gitlab.com/ee/user/project/merge_requests/drafts.html)
8. Решение конфликтов слияния зона ответственности автора MR. Приоритетный способ решения конфликтов - rebase вливаемой ветки

Пример описания MR
```
Интеграция верстки детальной страницы раздела "Статьи"
Задача: [1111](task_url)
```